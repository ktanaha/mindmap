# マインドマップアプリケーション - 要件定義書

## プロジェクト概要
Mac向けの使いやすいマインドマップアプリケーション

---

## 基本要件（確定）

### ユーザーストーリー
```
思考整理と学習メモを効率的に行いたいユーザーとして、
Markdownで記述しながらリアルタイムでマインドマップを確認でき、
マインドマップ上でノードを自由に操作できるアプリケーションが欲しい
```

### 機能要件

#### 必須機能（MVP）
1. **2ペイン表示**
   - 左ペイン: Markdown形式エディタ
   - 右ペイン: マインドマップのリアルタイム表示

2. **Markdownエディタ機能**
   - テキスト入力・編集
   - Markdown記法サポート（見出しレベルでノード階層を表現）
   - リアルタイムでマインドマップに反映

3. **マインドマップビュー機能**
   - ノードの自動配置
   - ノード間の接続線表示
   - ドラッグ&ドロップでノードの位置変更
   - ドラッグ&ドロップでノードの親子関係付け替え

4. **データ管理**
   - ローカルファイルとして保存（JSON形式）
   - ファイルの開く/保存機能

#### 今後追加予定の機能
- [ ] ノードの色分け
- [ ] ノードへのアイコン/画像追加
- [ ] 複数マップの管理
- [ ] マインドマップの検索機能
- [ ] エクスポート機能（PNG、PDF）
- [ ] クラウド同期

### 非機能要件
- **プラットフォーム**: macOS（Python 3.10+）
- **使いやすさ**: キーボードとマウスの両方で快適に操作可能
- **レスポンス**: Markdown入力からマップ反映まで即座（< 100ms）
- **データ形式**: JSON（将来的にSQLiteも検討）

---

## 技術スタック（確定）

### アプリケーション形態
- [x] **Pythonデスクトップアプリケーション**

### GUI フレームワーク
- [x] **PyQt6** または **PySide6**
  - 理由: ネイティブ風のUI、QGraphicsViewでマインドマップ描画が容易
  - QTextEditまたはQPlainTextEditでMarkdownエディタを実装

### Markdownパーサー
- [x] **markdown** または **mistune**
  - Markdown → ツリー構造への変換に使用

### データ保存形式
- [x] **JSON** （初期バージョン）
- [ ] SQLite（将来的に検討）

### テストフレームワーク
- [x] **pytest**
- [x] **pytest-qt** (PyQt6/PySide6のテスト用)

### 開発環境
- [x] Python 3.10以上
- [x] 仮想環境（venv）
- [ ] Docker（将来的に検討）

---

## アーキテクチャ設計

### システム構成
```
┌─────────────────────────────────────┐
│    MindMap Desktop Application      │
│                                     │
│  ┌─────────────┐  ┌──────────────┐ │
│  │  Markdown   │  │  MindMap     │ │
│  │  Editor     │  │  View        │ │
│  │  (左ペイン) │  │  (右ペイン)  │ │
│  │             │  │              │ │
│  │ QTextEdit   │  │QGraphicsView │ │
│  └─────────────┘  └──────────────┘ │
│         │                │          │
│         └────────┬───────┘          │
│                  │                  │
│         ┌────────▼────────┐         │
│         │  Parser Layer   │         │
│         │  (Markdown→Tree)│         │
│         └────────┬────────┘         │
│                  │                  │
│         ┌────────▼────────┐         │
│         │  Domain Layer   │         │
│         │  (MindMap Model)│         │
│         └────────┬────────┘         │
│                  │                  │
│         ┌────────▼────────┐         │
│         │ Storage Layer   │         │
│         │  (JSON File)    │         │
│         └─────────────────┘         │
└─────────────────────────────────────┘
```

### レイヤー構成
1. **Presentation Layer** (UI)
   - MarkdownEditor: テキスト編集UI
   - MindMapView: マインドマップ描画UI

2. **Parser Layer**
   - MarkdownParser: Markdown → ツリー構造変換

3. **Domain Layer**
   - Node: ノードのドメインモデル
   - MindMap: マインドマップ全体の管理

4. **Storage Layer**
   - JSONStorage: データの永続化

---

## 開発履歴

### 2025-12-27
- プロジェクト開始
- .gitignore作成（claude.logを除外設定）
- 要件定義書作成（このファイル）
- log_session.sh作成（セッションログ記録用）
- claude.log初期化
- 要件確定（思考整理・学習メモ用途、Pythonデスクトップアプリ）
- 技術スタック確定（PyQt6/PySide6、JSON保存）
- アーキテクチャ設計追加
